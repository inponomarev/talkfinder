<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title></title>

  <meta name="description" content="JUG Talks Finder">
  <meta name="author" content="Ivan Ponomarev">
  <link rel="stylesheet" href="/css/foundation.css">
  <link rel="stylesheet" href="/css/font-awesome.css">
  <link rel="stylesheet" href="/css/coderay.css">
  <link rel="stylesheet" href="/css/asciidoctor.css">
  <link rel="stylesheet" href="/css/custom.css">
  <!-- Yandex.Metrika counter -->
  <script type="text/javascript">
    (function (m, e, t, r, i, k, a) {
      m[i] = m[i] || function () { (m[i].a = m[i].a || []).push(arguments) };
      m[i].l = 1 * new Date(); k = e.createElement(t), a = e.getElementsByTagName(t)[0], k.async = 1, k.src = r, a.parentNode.insertBefore(k, a)
    })
      (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(64729483, "init", {
      clickmap: true,
      trackLinks: true,
      accurateTrackBounce: true
    });
  </script>
  <noscript>
    <div><img src="https://mc.yandex.ru/watch/64729483" style="position:absolute; left:-9999px;" alt="" /></div>
  </noscript>
  <!-- /Yandex.Metrika counter -->
  <script src="/js/vendor/modernizr.js"></script>
  <script src="/js/toc.js"></script>
  <script src="/js/simple-jekyll-search.min.js"></script>
</head>
<body>
  <nav class="top-bar">
    <ul class="title-area">
      <li class="name">
        <h1>
          <a href="/en/events.html">Events</a>
          <a href="/en/speakers.html">Speakers</a>
          <a href="/en/search.html">Search</a>
          <a href="/en/about.html">About</a>
          <a class="lang" href="/ru/talk/112.html">RU</a>
        </h1>
      </li>
    </ul>
  </nav>
  <div class="main-content">
    <div class="paragraph">
<p><span class="image"><a class="image" href="../evttype/0.html"><img src="/images/events/cpprussia.jpg" alt="cpprussia" width="80"></a></span> <a href="../event/2.html">C++ Russia 2019 SPb (31.10.2019&#8201;&#8212;&#8201;01.11.2019)
</a></p>
</div>
<div class="sect3">
<h4 id="the_c_rvalue_lifetime_disaster">The C++ rvalue lifetime disaster</h4>
<div class="paragraph event-speakers">
<p><span class="image"><a class="image" href="../speaker/990.html"><img src="/images/speakers/0990.jpg" alt="img" width="100" height="100"></a></span></p>
</div>
<div class="paragraph">
<p><em><a href="../speaker/990.html">Arno Schoedl</a></em></p>
</div>
<div class="paragraph">
<p>Arno will talk about the main problems surrounding rvalue references and suggest the alternate solution with the help of the library-only approach.</p>
</div>
<div class="paragraph">
<p>Rvalue references have been with us since C&#43;&#43;11. They have originally been introduced to make moving objects more efficient: the object an rvalue reference references is assumed to go out of scope soon and thus may have its resources scavenged without harm. The C&#43;&#43; standard library, for example, std::cref or std::ranges, makes use of yet another aspect of rvalue references: since they go out of scope soon, it is assumed unsafe to hold on to them beyond the scope of the current function, while lvalue references are considered safe. We, too, found this assumption to be very useful for smart memory management, particularly in generic code.</p>
</div>
<div class="paragraph">
<p>Unfortunately, the C&#43;&#43; language itself violates this assumption in at least two places. First, rvalues bind to const&amp;. This means that innocent-looking functions taking a parameter by const&amp; and passing it through in some way silently convert rvalues to lvalue references, hiding any lifetime limitation of the rvalues. Std::min/max are two such examples. Worse still, every accessor member function returning a const&amp; to a member suffers from this problem. Second, a temporary lifetime extension is meant to make binding a temporary to a reference safe by extending the lifetime of the temporary. But this only works as long as the temporary is still a prvalue. If the temporary has been passed through a function, even it has been correctly passed through by rvalue reference, lifetime extension will no longer be invoked and we get a dangling reference. These problems are not merely theoretical. We have had hard-to-find memory corruption in our code because of these problems.</p>
</div>
<div class="paragraph">
<p>In this talk, Arno will describe the problems in detail, present a library-only approach to mitigate the problems, and finally, make an impossible-to-ever-get-into-the-standard proposal of how to put things right.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Links
:</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://assets.ctfassets.net/oxjq45e8ilak/65bgoRLlBjXqNHI2HoNNkS/d38b1591af92237a839205a29d78d95e/100579_1454844315_Arno_Schoedl__The_C_rvalue_lifetime_disaster_.pdf" class="bare">https://assets.ctfassets.net/oxjq45e8ilak/65bgoRLlBjXqNHI2HoNNkS/d38b1591af92237a839205a29d78d95e/100579_1454844315_Arno_Schoedl__The_C_rvalue_lifetime_disaster_.pdf</a></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
  </div>
</body>
</html>